<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/js/style.css">
    <script src="/static/js/openPopup.js"></script>
    <title>Messenger</title>
    <script src="/static/js/scripts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.js"></script>
</head>
<body>

    <!--картинки-->
    <svg display="none">
        <symbol id="search" viewBox="0 0 512 512">
            <g>
                <path d="M344.5,298c15-23.6,23.8-51.6,23.8-81.7c0-84.1-68.1-152.3-152.1-152.3C132.1,64,64,132.2,64,216.3  c0,84.1,68.1,152.3,152.1,152.3c30.5,0,58.9-9,82.7-24.4l6.9-4.8L414.3,448l33.7-34.3L339.5,305.1L344.5,298z M301.4,131.2c22.7,22.7,35.2,52.9,35.2,85c0,32.1-12.5,62.3-35.2,85c-22.7,22.7-52.9,35.2-85,35.2c-32.1,0-62.3-12.5-85-35.2  c-22.7-22.7-35.2-52.9-35.2-85c0-32.1,12.5-62.3,35.2-85c22.7-22.7,52.9-35.2,85-35.2C248.5,96,278.7,108.5,301.4,131.2z"/>
            </g>
        </symbol>

        <symbol id="trash-can" viewBox="0 0 448 512">
            <g>
                <path d="M32 464C32 490.5 53.5 512 80 512h288c26.5 0 48-21.5 48-48V128H32V464zM304 208C304 199.1 311.1 192 320 192s16 7.125 16 16v224c0 8.875-7.125 16-16 16s-16-7.125-16-16V208zM208 208C208 199.1 215.1 192 224 192s16 7.125 16 16v224c0 8.875-7.125 16-16 16s-16-7.125-16-16V208zM112 208C112 199.1 119.1 192 128 192s16 7.125 16 16v224C144 440.9 136.9 448 128 448s-16-7.125-16-16V208zM432 32H320l-11.58-23.16c-2.709-5.42-8.25-8.844-14.31-8.844H153.9c-6.061 0-11.6 3.424-14.31 8.844L128 32H16c-8.836 0-16 7.162-16 16V80c0 8.836 7.164 16 16 16h416c8.838 0 16-7.164 16-16V48C448 39.16 440.8 32 432 32z"/>
            </g>
        </symbol>

        <symbol id="add-friend" viewBox="0 0 512 512">
            <g>
                <path class="st0" d="M132.56,54.6c-19.51,18.23-30.25,43.18-30.25,70.28c0,26.7,10.17,54.87,27.92,77.28    c19.77,24.98,45.62,38.74,72.79,38.74s53.02-13.76,72.79-38.74c17.74-22.42,27.92-50.59,27.92-77.28    c0-27.1-10.74-52.05-30.25-70.28c-18.71-17.48-43.73-27.1-70.45-27.1S151.26,37.13,132.56,54.6z M271.71,124.88    c0,38.06-30.65,84.02-68.7,84.02s-68.7-45.96-68.7-84.02c0-18.13,7.14-34.79,20.1-46.9c12.76-11.92,30.02-18.49,48.6-18.49    s35.84,6.57,48.6,18.49C264.57,90.09,271.71,106.75,271.71,124.88z"/><path class="st0" d="M373.27,284.57c-11.18,0-22.01,1.8-32.36,5.36c-3.3-3.78-6.89-7.42-10.76-10.88    c-8.47-7.59-18.2-14.29-28.91-19.92c-5.28-2.78-10.93-5.36-16.81-7.67c-4.64-1.82-9.86-1.38-14.12,1.2    c-20.83,12.58-44.1,19.23-67.31,19.23s-46.48-6.65-67.31-19.23c-4.26-2.57-9.48-3.02-14.11-1.2c-5.85,2.29-11.5,4.87-16.8,7.66    c-24.5,12.87-43.83,31.52-54.44,52.51c-10.38,20.53-13.72,45.13-10.19,75.21c3.86,32.96,8.97,61.02,15.61,85.79    c1.88,6.99,8.21,11.86,15.45,11.86H334.8c3.98,0,7.68-1.47,10.52-3.96c9.02,2.63,18.37,3.96,27.95,3.96    c55.12,0,99.96-44.84,99.96-99.96C473.23,329.42,428.39,284.57,373.27,284.57z M83.68,452.5c-4.81-20.35-8.68-43.18-11.75-69.37    c-2.81-23.98-0.59-42.1,6.97-57.06c7.63-15.11,22.11-28.82,40.77-38.63c2.16-1.14,4.39-2.23,6.68-3.27    c23.95,12.92,50.28,19.72,76.64,19.72c26.36,0,52.69-6.79,76.64-19.71c2.3,1.05,4.54,2.14,6.7,3.28    c8.39,4.41,15.95,9.6,22.48,15.46c1.01,0.9,2,1.82,2.96,2.75c-0.18,0.14-0.36,0.29-0.54,0.43c-0.3,0.24-0.6,0.48-0.9,0.72    c-0.55,0.45-1.1,0.9-1.64,1.35c-0.29,0.24-0.57,0.48-0.86,0.73c-0.59,0.51-1.17,1.02-1.75,1.54c-0.21,0.19-0.43,0.38-0.64,0.58    c-0.78,0.72-1.56,1.45-2.32,2.19c-0.11,0.11-0.23,0.23-0.34,0.34c-0.64,0.63-1.27,1.27-1.89,1.92c-0.24,0.25-0.47,0.5-0.71,0.75    c-0.5,0.53-0.99,1.06-1.47,1.6c-0.25,0.28-0.5,0.55-0.74,0.83c-0.48,0.54-0.95,1.09-1.41,1.64c-0.22,0.26-0.44,0.53-0.66,0.79    c-0.55,0.67-1.09,1.35-1.63,2.04c-0.11,0.15-0.23,0.29-0.34,0.44c-0.65,0.84-1.28,1.69-1.9,2.55c-0.15,0.2-0.29,0.41-0.43,0.62    c-0.47,0.66-0.92,1.32-1.37,1.98c-0.2,0.29-0.39,0.58-0.58,0.88c-0.39,0.6-0.78,1.2-1.17,1.81c-0.19,0.31-0.38,0.61-0.57,0.92    c-0.39,0.64-0.77,1.28-1.15,1.93c-0.16,0.27-0.31,0.53-0.47,0.8c-1.04,1.83-2.03,3.7-2.95,5.6c-0.13,0.27-0.26,0.55-0.39,0.83    c-0.32,0.68-0.64,1.37-0.95,2.06c-0.15,0.33-0.29,0.67-0.44,1c-0.29,0.66-0.56,1.32-0.83,1.98c-0.14,0.33-0.27,0.66-0.4,0.99    c-0.29,0.74-0.57,1.48-0.85,2.22c-0.09,0.25-0.19,0.5-0.28,0.76c-0.36,1-0.71,2.01-1.03,3.02c-0.05,0.16-0.1,0.32-0.15,0.48    c-0.27,0.85-0.53,1.7-0.78,2.56c-0.1,0.33-0.19,0.67-0.28,1c-0.19,0.7-0.38,1.4-0.56,2.1c-0.09,0.37-0.19,0.74-0.27,1.11    c-0.17,0.7-0.33,1.41-0.49,2.11c-0.08,0.35-0.15,0.69-0.23,1.04c-0.18,0.85-0.34,1.71-0.5,2.57c-0.04,0.2-0.08,0.39-0.11,0.59    c-0.18,1.06-0.35,2.12-0.5,3.19c-0.04,0.28-0.07,0.57-0.11,0.85c-0.1,0.79-0.2,1.57-0.29,2.36c-0.04,0.38-0.08,0.76-0.11,1.15    c-0.07,0.71-0.13,1.43-0.19,2.14c-0.03,0.39-0.06,0.79-0.08,1.18c-0.05,0.75-0.09,1.5-0.12,2.26c-0.01,0.34-0.03,0.69-0.04,1.03    c-0.04,1.09-0.06,2.19-0.06,3.29c0,19.18,5.46,37.83,15.77,53.91c0.73,1.14,1.49,2.26,2.27,3.37c0.23,0.33,0.48,0.66,0.71,0.99    c0.56,0.79,1.14,1.56,1.73,2.33c0.27,0.35,0.54,0.7,0.81,1.05c0.64,0.82,1.3,1.62,1.96,2.42c0.2,0.24,0.4,0.49,0.61,0.73    c0.87,1.02,1.76,2.03,2.67,3.01c0.04,0.05,0.08,0.1,0.13,0.14H83.68z M373.27,452.5c-10.31,0-20.21-2.25-29.42-6.68    c-23.42-11.26-38.55-35.32-38.55-61.28c0-1.62,0.06-3.23,0.17-4.83c1.67-23.97,15.7-45.14,37.47-56.01    c9.45-4.73,19.66-7.13,30.33-7.13c37.47,0,67.96,30.49,67.96,67.97C441.23,422.01,410.74,452.5,373.27,452.5z"/><path class="st0" d="M399.2,368.54h-9.93v-9.93c0-8.84-7.16-16-16-16s-16,7.16-16,16v9.93h-9.93c-8.84,0-16,7.16-16,16    s7.16,16,16,16h9.93v9.93c0,8.84,7.16,16,16,16s16-7.16,16-16v-9.93h9.93c8.84,0,16-7.16,16-16S408.03,368.54,399.2,368.54z"/>
            </g>
        </symbol>

        <symbol id="clip" viewBox="0 0 16 16">
            <g>
                <path d="M7.646,13.646l0.707,0.707l6-6c1.573-1.573,1.573-4.134,0-5.707c-1.574-1.574-4.133-1.574-5.707,0l-6.5,6.5  c-1.298,1.298-1.298,3.409,0,4.707c0.648,0.648,1.501,0.974,2.354,0.974s1.705-0.325,2.354-0.974l6-6  C13.349,7.358,13.621,6.7,13.621,6s-0.272-1.358-0.768-1.854c-0.99-0.99-2.717-0.99-3.707,0l-5.5,5.5l0.707,0.707l5.5-5.5  c0.611-0.611,1.682-0.611,2.293,0C12.452,5.159,12.621,5.566,12.621,6s-0.169,0.841-0.475,1.146l-6,6  c-0.908,0.908-2.385,0.908-3.293,0s-0.908-2.385,0-3.293l6.5-6.5c1.184-1.184,3.109-1.184,4.293,0s1.184,3.109,0,4.293L7.646,13.646  z"/>
            </g>
        </symbol>

        <symbol id="send-message" viewBox="0 0 24 24">
            <g>
                <path d="M21.5,11.1l-17.9-9C2.7,1.7,1.7,2.5,2.1,3.4l2.5,6.7L16,12L4.6,13.9l-2.5,6.7c-0.3,0.9,0.6,1.7,1.5,1.2l17.9-9   C22.2,12.5,22.2,11.5,21.5,11.1z"/>
            </g>
        </symbol>

        <symbol id="add-group-chat" viewBox="0 0 24 24">
            <g>
                <path d="M15.7,4.2c-0.8-1.2-2.2-2-3.7-2c-1.5,0-2.9,0.8-3.7,2C7.9,4.1,7.4,4,7,4C5.1,4,3.6,5.5,3.6,7.3c0,1.8,1.5,3.3,3.4,3.3   c0.7,0,1.4-0.2,2-0.7c0.8,0.7,1.9,1.1,3,1.1c1.1,0,2.2-0.4,3-1.1c0.6,0.4,1.3,0.7,2,0.7c1.9,0,3.4-1.5,3.4-3.3   C20.4,5.5,18.9,4,17,4C16.6,4,16.1,4.1,15.7,4.2z M7,8.5C6.2,8.5,5.6,8,5.6,7.3C5.6,6.6,6.2,6,7,6c0.2,0,0.4,0,0.5,0.1   c0,0.2,0,0.4,0,0.5c0,0.3,0,0.5,0.1,0.8c0,0.1,0,0.1,0,0.2c0,0.2,0.1,0.4,0.2,0.6c0,0,0,0.1,0,0.1C7.6,8.5,7.3,8.5,7,8.5z M12,9   c-0.9,0-1.6-0.4-2.1-1.1C9.6,7.5,9.5,7.1,9.5,6.6c0-0.2,0-0.5,0.1-0.7c0.3-1,1.3-1.7,2.4-1.7c1.1,0,2.1,0.7,2.4,1.7   c0.1,0.2,0.1,0.5,0.1,0.7c0,0.4-0.1,0.9-0.4,1.3C13.6,8.6,12.9,9,12,9z M18.4,7.3c0,0.7-0.6,1.3-1.4,1.3c-0.3,0-0.6-0.1-0.8-0.2   c0,0,0-0.1,0-0.1c0.1-0.2,0.1-0.4,0.2-0.5c0-0.1,0-0.1,0.1-0.2c0-0.3,0.1-0.5,0.1-0.8c0-0.2,0-0.4,0-0.5C16.6,6,16.8,6,17,6   C17.8,6,18.4,6.6,18.4,7.3z"/><path d="M21.6,14c-0.4-1.7-1.9-3-3.5-3h-2.2c-0.9,0-1.7,0.4-2.4,1h-3c-0.7-0.6-1.5-1-2.4-1H5.9c-1.6,0-3.1,1.2-3.5,3l-0.3,1.2   c-0.2,0.7,0,1.5,0.4,2.1c0.4,0.5,1,0.8,1.6,0.8h0l0,0.1c-0.3,0.9-0.1,1.9,0.5,2.7C5.2,21.6,6,22,7,22H17c0.9,0,1.8-0.4,2.3-1.2   c0.6-0.8,0.8-1.8,0.5-2.7l0-0.1h0c0.6,0,1.2-0.3,1.6-0.8c0.4-0.6,0.6-1.3,0.4-2.1L21.6,14z M4.1,16C4,15.9,4,15.8,4,15.6l0.3-1.2   C4.5,13.6,5.2,13,5.9,13h1c0,0-0.1,0.1-0.1,0.1c-0.1,0.1-0.2,0.2-0.4,0.3c-0.1,0.1-0.2,0.2-0.3,0.3c-0.1,0.1-0.2,0.2-0.3,0.3   c-0.1,0.1-0.2,0.2-0.3,0.4c-0.1,0.1-0.2,0.3-0.2,0.4c-0.1,0.1-0.2,0.3-0.2,0.4c-0.1,0.1-0.1,0.3-0.2,0.4c0,0.1-0.1,0.2-0.1,0.3   L4.1,16z M17.8,19.6C17.7,19.8,17.4,20,17,20H7c-0.4,0-0.6-0.2-0.7-0.4C6,19.4,6,19,6,18.7l0.4-1.4c0,0,0,0,0,0l0.1-0.5   C7,15.1,8.4,14,10,14h0H14c1.6,0,3,1.1,3.5,2.8l0.1,0.5c0,0,0,0,0,0l0.4,1.4C18,19,18,19.4,17.8,19.6z M19.9,16   C19.9,16,19.9,16,19.9,16l-0.6,0c0-0.1-0.1-0.2-0.1-0.3c-0.1-0.2-0.1-0.3-0.2-0.4c-0.1-0.1-0.1-0.3-0.2-0.4   c-0.1-0.1-0.2-0.3-0.3-0.4c-0.1-0.1-0.2-0.2-0.3-0.3c-0.1-0.1-0.2-0.3-0.3-0.4c-0.1-0.1-0.2-0.2-0.3-0.3c-0.1-0.1-0.3-0.2-0.4-0.3   c0,0-0.1-0.1-0.1-0.1h1c0.7,0,1.4,0.6,1.6,1.4l0.3,1.2C20,15.8,20,15.9,19.9,16z"/>
            </g>
        </symbol>
    </svg>

    <div class="main">
        <!--блок меню-->
        <div class="block-menu-border">
            <blockMenu th:include="blocks/blockMenu :: blockMenu"></blockMenu>
        </div>

        <!-- chat box-->
        <div class="friend-menu-border">
            <div class="friend-menu">
                <nav>
                    <div class="form-search">
                        <div class="new-group-chat">
                            <a onclick="openPopupNewGroupChat()">
                                <svg class="add-group-chat-icon">
                                    <use xlink:href="#add-group-chat"></use>
                                </svg>
                            </a>
                            <div class="prompt-new-group-chat">Новый групповой чат</div>
                        </div>
                        <input class="input-search" placeholder="Search">
                        <svg class="search-icon">
                            <use xlink:href="#search"></use>
                        </svg>
                        <button style="display:none" type="submit">Search</button>
                    </div>
                </nav>

                <hr>

                <div class="friends-box">
                    <tr th:each="printChat : ${printChats}">
                        <td th:include="blocks/blockChat :: blockChat"></td>
                    </tr>
                </div>
            </div>
        </div>

        <div class="chat-box-border">
            <td th:if="${active}" th:include="blocks/blockChatBox :: blockChatBox"></td>
        </div>

        <!--popup добавление нового друга-->
        <div id="popup-new-group-chat" class="popup" th:classappend="${openPopup} ? open">
            <a onclick="closePopupNewGroupChat()" class="popup-area"></a>
            <div class="popup-body">
                <div class="popup-new-group-chat__content">
                    <h1 class="new-friend-text">Создать группу</h1>
                    <form class="form-new-group-chat" method="post">
                        <input type="text" class="input-new-friend" name="email" id="email" placeholder="Название группы">
                        <div class="list-friend" id="list-friend"></div>
                        <p id="exception-new-friend" class="exception-new-friend" th:text="${exception}"></p>
                        <button class="button-new-friend" type="submit">Create Chat</button>
                    </form>
                </div>
            </div>
        </div>

    </div>


</body>

</html>